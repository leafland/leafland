async function getProductImages(){let e=window.location.pathname;e=e.slice(0,e.length-1),e=e.split(/\/trees\//)[1],productImageData=await fetch(`https://api.leafland.co.nz/default/get-single-product-images?prefix=${e}`).then(e=>e.json()).then(e=>e).catch(e=>{});for(let t=0;t<productImageData.length;t++)-1!==productImageData[t].Key.search("grades")&&(gradeImages.push(productImageData[t].Key),productImageData.splice(t,1),t--),productImageData[t].Key.split("/",3)[2]!==e?(productImageData.splice(t,1),t--):-1===productImageData[t].Key.search("jpg")&&-1===productImageData[t].Key.search("jpeg")&&(productImageData.splice(t,1),t--)}async function getProductTreeData(){let e=window.location.pathname;e=e.slice(0,e.length-1),e=e.split(/\/trees\//)[1],productTreeData=await fetch(`https://api.leafland.co.nz/default/get-product-data?type=product&url=${e}`).then(e=>e.json()).then(e=>e).catch(e=>{})}async function getProductStockData(){productStockData=await fetch("https://api.leafland.co.nz/default/get-stock-data-file").then(e=>e.json()).then(e=>e).catch(e=>{});for(let e=0;e<productStockData.length;e++)"serrula interstem"===treeCommonName.textContent.toLowerCase()?`${treeBotanicalName.textContent} serrula interstem`.replace(/'/g,"").replace(/"/g,"").replace(/ var. /g," ").replace(/ x /g," ").replace(/\(/g,"").replace(/\)/g,"").toLowerCase().trim()!==productStockData[e][0].replace(/'/g,"").replace(/"/g,"").replace(/ var. /g," ").replace(/ x /g," ").replace(/\(/g,"").replace(/\)/g,"").toLowerCase().trim()&&(productStockData.splice(e,1),e--):treeBotanicalName.textContent.replace(/'/g,"").replace(/"/g,"").replace(/ var. /g," ").replace(/ x /g," ").toLowerCase().trim()!==productStockData[e][0].replace(/'/g,"").replace(/"/g,"").replace(/ var. /g," ").replace(/ x /g," ").toLowerCase().trim()&&(productStockData.splice(e,1),e--)}async function createTreeImages(e){imagePosition=e.length-1,imageLightBoxClose.addEventListener("click",()=>{document.body.classList.remove("lightbox-open")});for(let t=e.length-1;t>=0;t--)if(!e[t].Key.includes("grades")&&(-1!==e[t].Key.search("jpg")||-1!==e[t].Key.search("jpeg"))){let a=document.createElement("img");a.src=`https://ik.imagekit.io/leafland/${e[t].Key}?tr=w-150,q-75,pr-true,f-auto`,a.width="150",a.height="150",a.alt=e[t].Key.substring(e[t].Key.lastIndexOf("/")+1,e[t].Key.lastIndexOf(".")).replace(/-/g," "),a.loading="lazy";let s=document.createElement("div");s.classList.add("image"),images.appendChild(s),s.appendChild(a);let i=document.createElement("img");i.onload=(()=>{i.style.setProperty("opacity","1")}),i.src=`https://ik.imagekit.io/leafland/${e[t].Key}?tr=w-1000,q-75,pr-true,f-auto`,i.height="1000",i.width="1000",i.alt=e[t].Key.substring(e[t].Key.lastIndexOf("/")+1,e[t].Key.lastIndexOf(".")).replace(/-/g," "),i.loading="lazy",i.classList.add("main-img"),i.addEventListener("click",()=>{imageLightboxInner.innerHTML=`<img src='https://ik.imagekit.io/leafland/${e[t].Key}?tr=w-1000,q-75,pr-true,f-auto'>`,document.body.classList.add("lightbox-open")}),t===e.length-1&&(mainImage.appendChild(i),i.style.setProperty("opacity","1"),i.loading="eager"),a.addEventListener("click",e=>{let s=document.querySelector(".main-img");imagePosition=t,e.preventDefault(),s.alt!==a.alt&&(mainImage.style.setProperty("opacity","0"),mainImage.style.setProperty("visibility","hidden"),setTimeout(()=>{mainImage.innerHTML="",mainImage.appendChild(i),mainImage.style.setProperty("opacity","1"),mainImage.style.setProperty("visibility","visible")},500))})}imageLeftButton.addEventListener("click",()=>{e[imagePosition].Key.includes("grades")||-1===e[imagePosition].Key.search("jpg")&&-1===e[imagePosition].Key.search("jpeg")?imagePosition+=2:imagePosition++,imagePosition>e.length-1&&(imagePosition=0);let t=document.createElement("img");t.onload=(()=>{t.style.setProperty("opacity","1")}),t.src=`https://ik.imagekit.io/leafland/${e[imagePosition].Key}?tr=w-1000,q-75,pr-true,f-auto`,t.height="1000",t.width="1000",t.alt=e[imagePosition].Key.substring(e[imagePosition].Key.lastIndexOf("/")+1,e[imagePosition].Key.lastIndexOf(".")).replace(/-/g," "),t.loading="lazy",t.classList.add("main-img"),t.addEventListener("click",()=>{imageLightboxInner.innerHTML=`<img src='https://ik.imagekit.io/leafland/${e[imagePosition].Key}?tr=w-1000,q-75,pr-true,f-auto'>`,document.body.classList.add("lightbox-open")}),mainImage.style.setProperty("opacity","0"),mainImage.style.setProperty("visibility","hidden"),setTimeout(()=>{mainImage.innerHTML="",mainImage.appendChild(t),mainImage.style.setProperty("opacity","1"),mainImage.style.setProperty("visibility","visible")},500)}),imageRightButton.addEventListener("click",()=>{e[imagePosition].Key.includes("grades")||-1===e[imagePosition].Key.search("jpg")&&-1===e[imagePosition].Key.search("jpeg")?imagePosition-=2:imagePosition--,imagePosition<0&&(imagePosition=e.length-1);let t=document.createElement("img");t.onload=(()=>{t.style.setProperty("opacity","1")}),t.src=`https://ik.imagekit.io/leafland/${e[imagePosition].Key}?tr=w-1000,q-75,pr-true,f-auto`,t.height="1000",t.width="1000",t.alt=e[imagePosition].Key.substring(e[imagePosition].Key.lastIndexOf("/")+1,e[imagePosition].Key.lastIndexOf(".")).replace(/-/g," "),t.loading="lazy",t.classList.add("main-img"),t.addEventListener("click",()=>{imageLightboxInner.innerHTML=`<img src='https://ik.imagekit.io/leafland/${e[imagePosition].Key}?tr=w-1000,q-75,pr-true,f-auto'>`,document.body.classList.add("lightbox-open")}),mainImage.style.setProperty("opacity","0"),mainImage.style.setProperty("visibility","hidden"),setTimeout(()=>{mainImage.innerHTML="",mainImage.appendChild(t),mainImage.style.setProperty("opacity","1"),mainImage.style.setProperty("visibility","visible")},500)})}async function createStockValues(){if(0!==productStockData.length){for(let e=0;e<productStockData.length;e++)if(0===grades.length)grades.push({grade:productStockData[e][2],heights:[{averageHeight:""===productStockData[e][6]?"N/A":productStockData[e][6],standardHeights:[{quantity:parseInt(productStockData[e][8],10),standardHeight:productStockData[e][7],retailPrice:productStockData[e][3].replace(/,/g,""),wholesalePrice:productStockData[e][5].replace(/,/g,"")}]}],comingOn:parseInt(productStockData[e][9])});else for(let t=0;t<grades.length+1;t++){if(t===grades.length){grades.push({grade:productStockData[e][2],heights:[{averageHeight:""===productStockData[e][6]?"N/A":productStockData[e][6],standardHeights:[{quantity:parseInt(productStockData[e][8],10),standardHeight:productStockData[e][7],retailPrice:productStockData[e][3].replace(/,/g,""),wholesalePrice:productStockData[e][5].replace(/,/g,"")}]}],comingOn:parseInt(productStockData[e][9])});break}if(grades[t].grade.toLowerCase()===productStockData[e][2].toLowerCase()){grades[t].comingOn+=parseInt(productStockData[e][9]);for(let a=0;a<grades[t].heights.length+1;a++){if(a===grades[t].heights.length){grades[t].heights.push({averageHeight:""===productStockData[e][6]?"N/A":productStockData[e][6],standardHeights:[{quantity:parseInt(productStockData[e][8],10),standardHeight:productStockData[e][7],retailPrice:productStockData[e][3].replace(/,/g,""),wholesalePrice:productStockData[e][5].replace(/,/g,"")}]});break}if(grades[t].heights[a].averageHeight===productStockData[e][6]||"N/A"===grades[t].heights[a].averageHeight&&""===productStockData[e][6]){for(let s=0;s<grades[t].heights[a].standardHeights.length+1;s++){if(s===grades[t].heights[a].standardHeights.length){grades[t].heights[a].standardHeights.push({quantity:parseInt(productStockData[e][8],10),standardHeight:productStockData[e][7],retailPrice:productStockData[e][3].replace(/,/g,""),wholesalePrice:productStockData[e][5].replace(/,/g,"")});break}if(grades[t].heights[a].standardHeights[s].standardHeight===productStockData[e][7]){grades[t].heights[a].standardHeights[s].quantity=parseInt(grades[t].heights[a].standardHeights[s].quantity,10),grades[t].heights[a].standardHeights[s].quantity+=parseInt(productStockData[e][8],10);break}}break}}break}}grades.forEach(e=>{let t=document.createElement("option");t.value=e.grade,t.textContent=e.grade,gradeSizeSelect.appendChild(t),0!==parseInt(e.comingOn)&&(17===comingOn.textContent.length?comingOn.innerHTML+=` ${e.grade} (<span class="accent-color">${e.comingOn}</span>)`:comingOn.innerHTML+=`, ${e.grade} (<span class="accent-color">${e.comingOn}</span>)`)}),17===comingOn.textContent.length&&(comingOn.innerHTML+=' <span class="accent-color">none</span>');let e=0;grades[0].heights.forEach(t=>{let a=document.createElement("option");""!==t.averageHeight?(a.value=t.averageHeight,a.textContent=`${"n/a"===t.averageHeight.toLowerCase()?t.averageHeight:t.averageHeight+"m"}`):(a.value="N/A",a.textContent="N/A"),heightSelect.appendChild(a),grades[0].heights[0].standardHeights.forEach(t=>{let a=document.createElement("option");""!==t.standardHeight.trim()&&"bushy"!==t.standardHeight.toLowerCase().trim()&&"l/w"!==t.standardHeight.toLowerCase().trim()&&"lw"!==t.standardHeight.toLowerCase().trim()&&"ct"!==t.standardHeight.toLowerCase().trim()?(a.value=`${t.standardHeight}?q=${t.quantity}`,null!==t.standardHeight.match(/\d+/g)?a.textContent=t.standardHeight+"m":a.textContent=t.standardHeight,standardHeightSelect.appendChild(a)):"column"!==t.standardHeight.toLowerCase().trim()&&(e+=t.quantity)})});let t=document.createElement("option");t.value=`None?q=${e}`,t.textContent="None",standardHeightSelect.appendChild(t);let a=document.createElement("p");a.innerHTML=`<span class="stock-value-title">Quantity in stock:</span> <span class="quantity accent-color">${grades[0].heights[0].standardHeights[0].quantity}</span>`;let s=document.createElement("p");s.innerHTML=`<span class="stock-value-title">Price per tree:</span> <span id="wholesale-price" class="accent-color">${grades[0].heights[0].standardHeights[0].wholesalePrice}.00+GST (Wholesale)</span> <span id="retail-price" class="accent-color">${grades[0].heights[0].standardHeights[0].retailPrice}.00+GST (Retail)</span>`,stockValuesDiv.appendChild(a),stockValuesDiv.appendChild(s),0===grades[0].heights[0].standardHeights[0].quantity?(addToOrderButton.disabled=!0,treeQuantity.disabled=!0,treeQuantity.value=1):(addToOrderButton.disabled=!1,treeQuantity.disabled=!1,treeQuantity.max=grades[0].heights[0].standardHeights[0].quantity,treeQuantity.onchange=function(){this.value<1?this.value=1:this.value>grades[0].heights[0].standardHeights[0].quantity&&(this.value=grades[0].heights[0].standardHeights[0].quantity)})}else{gradeSizesDiv.innerHTML="";let e=document.createElement("h2");e.textContent="Currently out of stock.",gradeSizesDiv.appendChild(e),gradeSizesDiv.style.setProperty("grid-template-columns","1fr"),gradeSizesDiv.style.setProperty("margin-top","0"),document.querySelector("#grade-sizes-heading").style.setProperty("display","none"),document.querySelector("#stock-information").style.setProperty("display","none"),document.querySelector("#success-message").style.setProperty("display","none"),stockValuesDiv.style.setProperty("display","none"),document.querySelector(".product-disclaimer").style.setProperty("display","none"),document.querySelector("#coming-on").style.setProperty("display","none")}}function createToleratesAttributes(e){0!==e[0].tolerates.length&&e[0].tolerates.split(", ").forEach(e=>{let t=document.createElement("div");t.classList.add("icon-div");let a=document.createElement("img");a.classList.add("tree-icon");let s=document.createElement("span");switch(s.classList.add("tooltip"),e){case"clay":a.src="https://files.leafland.co.nz/images/icons/tree-attributes/clay.svg",a.classList.add("clay"),s.classList.add("clay-tooltip"),s.textContent="Tolerates clay soils";break;case"dry":a.src="https://files.leafland.co.nz/images/icons/tree-attributes/dry.svg",a.classList.add("dry"),s.classList.add("dry-tooltip"),s.textContent="Tolerates dry sites";break;case"wet":a.src="https://files.leafland.co.nz/images/icons/tree-attributes/wet.svg",a.classList.add("wet"),s.classList.add("wet-tooltip"),s.textContent="Tolerates wet sites";break;case"windy":a.src="https://files.leafland.co.nz/images/icons/tree-attributes/windy.svg",a.classList.add("windy"),s.classList.add("windy-tooltip"),s.textContent="Tolerates windy sites"}t.appendChild(a),t.appendChild(s),treeAttributes.appendChild(t)})}async function populateTreeAttributes(e){createToleratesAttributes(e)}async function createRelatedTrees(e){let t=["uses","tolerates","winterFoliage","origin","types","floweringSeason","flowerColor","autumnColor","foliageColor","fruitingSeason"],a=await fetch("https://api.leafland.co.nz/default/get-product-data?type=tree-finder").then(e=>e.json()).then(e=>e).catch(e=>{}),s=await fetch("https://api.leafland.co.nz/default/get-image-data").then(e=>e.json()).then(e=>e).catch(e=>{});if(t.length>0){let r=[];for(let s=0;s<a.length&&!(r.length>11);s++)if(a[s].botanicalName!==e[0].botanicalName){let i=!1;for(let r=0;r<t.length;r++){if(e[0][t[r]]!==a[s][t[r]]){i=!1;break}i=!0}i&&r.push(a[s])}if(0===r.length){let t="";for(i=0;i<a.length&&!(r.length>11);i++)a[i].botanicalName!==e[0].botanicalName&&(-1===e[0].botanicalName.split(" ")[1].search("'")&&"x"!==e[0].botanicalName.split(" ")[1]?(t=`${e[0].botanicalName.split(" ")[0]} ${e[0].botanicalName.split(" ")[1]}`,-1!==t.search(a[i].botanicalName.split(" ")[0])&&-1!==t.search(a[i].botanicalName.split(" ")[1])&&r.push(a[i])):(t=`${e[0].botanicalName.split(" ")[0]}`,-1!==t.search(a[i].botanicalName.split(" ")[0])&&r.push(a[i])))}if(r.length>0){for(let e=0;e<r.length;e++){let t=[];for(let a=0;a<s.length;a++)if(s[a].split("/",4)[3]===`${r[e].url}.jpg`||s[a].split("/",4)[3]===`${r[e].url}.jpeg`){t.push(s[a]);break}if(r.length>0&&t.length>0){let a=document.createElement("div");a.classList.add("related-tree");let s=document.createElement("div");s.classList.add("tree-image");let i=document.createElement("div");i.classList.add("tree-content");let n=document.createElement("div"),d=document.createElement("h2"),o=document.createElement("h3");d.textContent=r[e].botanicalName,n.appendChild(d),""!==r[e].commonName&&(o.textContent=r[e].commonName,n.appendChild(o));let l=document.createElement("img");l.src=`https://ik.imagekit.io/leafland/${t[0]}?tr=w-500,q-75,pr-true,f-auto`;let c=document.createElement("a");c.textContent="View Tree",c.classList.add("button"),c.classList.add("tree-link"),c.href=`/trees/${r[e].url}`,i.appendChild(n),i.appendChild(c),s.appendChild(l),a.appendChild(s),a.appendChild(i),a.style.setProperty("--animation-order",`${e%r.length}`),a.classList.add("related-tree-loaded"),relatedTreesSection.appendChild(a)}}relatedTreesSection.style.setProperty("display","grid"),relateTreesHeading.style.setProperty("display","inline-block")}else relateTreesHeading.style.setProperty("display","none"),relatedTreesSection.style.setProperty("display","none")}else relateTreesHeading.style.setProperty("display","none"),relatedTreesSection.style.setProperty("display","none")}function addTreeToLocalStorage(){productTrees=JSON.parse(localStorage.getItem("trees"));let e=0,t=0;for(let e=0;e<grades.length;e++)if(grades[e].grade===gradeSizeSelect.value)for(let t=0;t<grades[e].heights.length;t++)if(grades[e].heights[t].averageHeight===heightSelect.value)for(let a=0;a<grades[e].heights[t].standardHeights.length;a++)grades[e].heights[t].standardHeights[a]===standardHeightSelect.value&&(retailPrice=`${grades[e].heights[t].standardHeights[a].retailPrice}.00`,wholesalePrice=`${grades[e].heights[t].standardHeights[a].wholesalePrice}.00`);if(0===productTrees.length)productTrees.push({botanicalName:treeBotanicalName.textContent,commonName:treeCommonName.textContent,url:window.location.pathname,grade:gradeSizeSelect.value,averageHeight:heightSelect.value,quantity:parseInt(treeQuantity.value,10),maxQuantity:treeQuantity.max,standardHeight:standardHeightSelect.value.split("?q=")[0],retailPrice:document.querySelector("#retail-price").textContent.split(".00+GST")[0],wholesalePrice:document.querySelector("#wholesale-price").textContent.split(".00+GST")[0]});else for(let e=0;e<productTrees.length+1;e++){if(e===productTrees.length){productTrees.push({botanicalName:treeBotanicalName.textContent,commonName:treeCommonName.textContent,url:window.location.pathname,grade:gradeSizeSelect.value,averageHeight:heightSelect.value,quantity:parseInt(treeQuantity.value,10),maxQuantity:treeQuantity.max,standardHeight:standardHeightSelect.value.split("?q=")[0],retailPrice:document.querySelector("#retail-price").textContent.split(".00+GST")[0],wholesalePrice:document.querySelector("#wholesale-price").textContent.split(".00+GST")[0]});break}if(productTrees[e].quantity=parseInt(productTrees[e].quantity,10),productTrees[e].botanicalName===treeBotanicalName.textContent&&productTrees[e].grade===gradeSizeSelect.value&&productTrees[e].averageHeight===heightSelect.value&&productTrees[e].standardHeight===standardHeightSelect.value.split("?q=")[0]){productTrees[e].quantity+=parseInt(treeQuantity.value,10),productTrees[e].quantity>productTrees[e].maxQuantity&&(productTrees[e].quantity=productTrees[e].maxQuantity,maximumQuantityReached=!0);break}}productTrees.forEach(a=>{e+=a.quantity*parseInt(a.retailPrice.slice(1),10),t+=a.quantity*parseInt(a.wholesalePrice.slice(1),10)}),localStorage.setItem("trees",JSON.stringify(productTrees)),localStorage.setItem("totalRetailCost",JSON.stringify(e)),localStorage.setItem("totalWholesaleCost",JSON.stringify(t))}function addEventListeners(){window.addEventListener("storage",function(e){"trees"===e.key&&(productTrees=JSON.parse(localStorage.getItem(e.key)))}),addToOrderButton.addEventListener("click",()=>{addTreeToLocalStorage(),window.dispatchEvent(productAdded),maximumQuantityReached?(document.querySelector("#success-message-text").innerHTML="You tried adding more trees than we have in stock. Order quantity has been set to the maximum quantity.",maximumQuantityReached=!1):document.querySelector("#success-message-text").innerHTML=`${quantity.value}<span class="lowercase">x</span> ${treeBotanicalName.textContent} ${""!==treeCommonName.textContent?'(<span class="accent-color">'+treeCommonName.textContent+"</span>)":""} ${gradeSizeSelect.value} added to order.`,successMessage.style.setProperty("opacity","1"),successMessage.style.setProperty("visibility","visible"),successMessage.style.setProperty("z-index","10"),setTimeout(()=>{successMessage.style.setProperty("opacity","0"),successMessage.style.setProperty("visibility","hidden"),successMessage.style.setProperty("z-index","-1")},4e3)}),gradeSizeSelect.addEventListener("change",e=>{stockValuesDiv.innerHTML="",treeQuantity.value=1;for(let t=0;t<grades.length;t++)if(grades[t].grade===e.target.value.split("-0")[0]){heightSelect.innerHTML="",standardHeightSelect.innerHTML="";let e=0;for(let e=0;e<grades[t].heights.length;e++){let a=document.createElement("option");""!==grades[t].heights[e].averageHeight?(a.value=grades[t].heights[e].averageHeight,a.textContent=`${"n/a"===grades[t].heights[e].averageHeight.toLowerCase()?grades[t].heights[e].averageHeight:grades[t].heights[e].averageHeight+"m"}`):(a.value="N/A",a.textContent="N/A"),heightSelect.appendChild(a)}let a=!1;for(let s=0;s<grades[t].heights[0].standardHeights.length;s++){let i=document.createElement("option");""!==grades[t].heights[0].standardHeights[s].standardHeight.trim()&&"bushy"!==grades[t].heights[0].standardHeights[s].standardHeight.toLowerCase().trim()&&"l/w"!==grades[t].heights[0].standardHeights[s].standardHeight.toLowerCase().trim()&&"lw"!==grades[t].heights[0].standardHeights[s].standardHeight.toLowerCase().trim()&&"ct"!==grades[t].heights[0].standardHeights[s].standardHeight.toLowerCase().trim()?(i.value=`${grades[t].heights[0].standardHeights[s].standardHeight}?q=${grades[t].heights[0].standardHeights[s].quantity}`,null!==grades[t].heights[0].standardHeights[s].standardHeight.match(/\d+/g)?i.textContent=grades[t].heights[0].standardHeights[s].standardHeight+"m":i.textContent=grades[t].heights[0].standardHeights[s].standardHeight,standardHeightSelect.appendChild(i)):"column"!==grades[t].heights[0].standardHeights[s].standardHeight.toLowerCase().trim()&&(0===s&&(a=!0),e+=grades[t].heights[0].standardHeights[s].quantity)}let s=document.createElement("option");s.value=`None?q=${e}`,s.textContent="None",standardHeightSelect.appendChild(s);let i=0;i=a?e:grades[t].heights[0].standardHeights[0].quantity;let r=document.createElement("p");r.innerHTML=`<span class="stock-value-title">Quantity in stock:</span> <span class="quantity accent-color">${i}</span>`;let n=document.createElement("p");n.innerHTML=`<span class="stock-value-title">Price per tree:</span> <span id="wholesale-price" class="accent-color">${grades[t].heights[0].standardHeights[0].wholesalePrice}.00+GST (Wholesale)</span> <span id="retail-price" class="accent-color">${grades[t].heights[0].standardHeights[0].retailPrice}.00+GST (Retail)</span>`,stockValuesDiv.appendChild(r),stockValuesDiv.appendChild(n),0===i?(addToOrderButton.disabled=!0,treeQuantity.disabled=!0,treeQuantity.value=1):(addToOrderButton.disabled=!1,treeQuantity.disabled=!1,treeQuantity.max=i,treeQuantity.onchange=function(){this.value<1?this.value=1:this.value>i&&(this.value=i)});break}}),heightSelect.addEventListener("change",e=>{stockValuesDiv.innerHTML="",standardHeightSelect.innerHTML="",treeQuantity.value=1;for(let t=0;t<grades.length;t++)if(grades[t].grade===gradeSizeSelect.value){let a=0;for(let s=0;s<grades[t].heights.length;s++)if(grades[t].heights[s].averageHeight===e.target.value){let e=!1;for(let i=0;i<grades[t].heights[s].standardHeights.length;i++){let r=document.createElement("option");""!==grades[t].heights[s].standardHeights[i].standardHeight.trim()&&"bushy"!==grades[t].heights[s].standardHeights[i].standardHeight.toLowerCase().trim()&&"l/w"!==grades[t].heights[s].standardHeights[i].standardHeight.toLowerCase().trim()&&"lw"!==grades[t].heights[s].standardHeights[i].standardHeight.toLowerCase().trim()&&"ct"!==grades[t].heights[s].standardHeights[i].standardHeight.toLowerCase().trim()?(r.value=`${grades[t].heights[s].standardHeights[i].standardHeight}?q=${grades[t].heights[s].standardHeights[i].quantity}`,null!==grades[t].heights[s].standardHeights[i].standardHeight.match(/\d+/g)?r.textContent=grades[t].heights[s].standardHeights[i].standardHeight+"m":r.textContent=grades[t].heights[s].standardHeights[i].standardHeight,standardHeightSelect.appendChild(r)):"column"!==grades[t].heights[s].standardHeights[i].standardHeight.toLowerCase().trim()&&(0===i&&(e=!0,r=document.createElement("option"),standardHeightSelect.appendChild(r),r.textContent="None"),a+=grades[t].heights[s].standardHeights[i].quantity,r.value=`None?q=${a}`)}let i=0;i=e?a:grades[t].heights[s].standardHeights[0].quantity;let r=document.createElement("p");r.innerHTML=`<span class="stock-value-title">Quantity in stock:</span> <span class="quantity accent-color">${i}</span>`;let n=document.createElement("p");n.innerHTML=`<span class="stock-value-title">Price per tree:</span> <span id="wholesale-price" class="accent-color">${grades[t].heights[s].standardHeights[0].wholesalePrice}.00+GST (Wholesale)</span> <span id="retail-price" class="accent-color">${grades[t].heights[s].standardHeights[0].retailPrice}.00+GST (Retail)</span>`,stockValuesDiv.appendChild(r),stockValuesDiv.appendChild(n),0===i?(addToOrderButton.disabled=!0,treeQuantity.disabled=!0,treeQuantity.value=1):(addToOrderButton.disabled=!1,treeQuantity.disabled=!1,treeQuantity.max=i,treeQuantity.onchange=function(){this.value<1?this.value=1:this.value>i&&(this.value=i)});break}break}}),standardHeightSelect.addEventListener("change",e=>{stockValuesDiv.innerHTML="",treeQuantity.value=1;for(let t=0;t<grades.length;t++)if(grades[t].grade===gradeSizeSelect.value){for(let a=0;a<grades[t].heights.length;a++)if(grades[t].heights[a].averageHeight===heightSelect.value){for(let s=0;s<grades[t].heights[a].standardHeights.length+1;s++){if(grades[t].heights[a].standardHeights[s].standardHeight===e.target.value.split("?q=")[0]){let e=document.createElement("p");e.innerHTML=`<span class="stock-value-title">Quantity in stock:</span> <span class="quantity accent-color">${grades[t].heights[a].standardHeights[s].quantity}</span>`;let i=document.createElement("p");i.innerHTML=`<span class="stock-value-title">Price per tree:</span> <span id="wholesale-price" class="accent-color">${grades[t].heights[a].standardHeights[s].wholesalePrice}.00+GST (Wholesale)</span> <span id="retail-price" class="accent-color">${grades[t].heights[a].standardHeights[s].retailPrice}.00+GST (Retail)</span>`,stockValuesDiv.appendChild(e),stockValuesDiv.appendChild(i),0===grades[t].heights[a].standardHeights[s].quantity?(addToOrderButton.disabled=!0,treeQuantity.disabled=!0,treeQuantity.value=1):(addToOrderButton.disabled=!1,treeQuantity.disabled=!1,treeQuantity.max=grades[t].heights[a].standardHeights[s].quantity,treeQuantity.onchange=function(){this.value<1?this.value=1:this.value>grades[t].heights[a].standardHeights[s].quantity&&(this.value=grades[t].heights[a].standardHeights[s].quantity)});break}if("None"===e.target.value.split("?q=")[0]){let i=document.createElement("p");i.innerHTML=`<span class="stock-value-title">Quantity in stock:</span> <span class="quantity accent-color">${e.target.value.split("?q=")[1]}</span>`;let r=document.createElement("p");r.innerHTML=`<span class="stock-value-title">Price per tree:</span> <span id="wholesale-price" class="accent-color">${grades[t].heights[a].standardHeights[s].wholesalePrice}.00+GST (Wholesale)</span> <span id="retail-price" class="accent-color">${grades[t].heights[a].standardHeights[s].retailPrice}.00+GST (Retail)</span>`,stockValuesDiv.appendChild(i),stockValuesDiv.appendChild(r),0===parseInt(e.target.value.split("?q=")[1])?(addToOrderButton.disabled=!0,treeQuantity.disabled=!0,treeQuantity.value=1):(addToOrderButton.disabled=!1,treeQuantity.disabled=!1);break}}break}break}})}let colorSection=document.querySelector("#color-section"),relatedTreesSection=document.querySelector("#related-trees"),relateTreesHeading=document.querySelector("#related-trees-heading"),successMessage=document.querySelector("#success-message"),gradeSizeSelect=document.querySelector("#grade-size-select"),heightSelect=document.querySelector("#height-select"),standardHeightSelect=document.querySelector("#standard-height-select"),gradeSizesDiv=document.querySelector("#grade-sizes"),stockValuesDiv=document.querySelector("#stock-values"),treeQuantity=document.querySelector("#quantity"),treeBotanicalName=document.querySelector(".tree-botanical-name"),treeCommonName=document.querySelector(".tree-common-name"),images=document.querySelector(".images"),mainImage=document.querySelector("#main-image-inner"),addToOrderButton=document.querySelector("#add-product"),treeAttributes=document.querySelector("#tree-attributes"),imageLightbox=document.querySelector("#image-lightbox"),imageLightboxInner=document.querySelector("#image-lightbox-div"),imageLightBoxClose=document.querySelector("#image-lightbox-close"),comingOn=document.querySelector("#coming-on"),imageLeftButton=document.querySelector("#image-left-button"),imageRightButton=document.querySelector("#image-right-button"),imagePosition=0,productTreeData=[],productImageData=[],productStockData=[],gradeImages=[],maximumQuantityReached=!1,productTrees=JSON.parse(localStorage.getItem("trees"));const productAdded=new Event("productAdded");let grades=[];""===treeCommonName.textContent&&treeCommonName.style.setProperty("display","none"),window.addEventListener("loginUpdated",()=>{(async function(){addEventListeners(),await getProductTreeData(),productTreeData.length>0&&(await populateTreeAttributes(productTreeData),await getProductImages(),await createTreeImages(productImageData),await getProductStockData(),await createStockValues(grades),await createRelatedTrees(productTreeData),document.body.classList.add("page-loaded"))})()});