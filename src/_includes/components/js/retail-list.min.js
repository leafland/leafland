async function displayData(t,e,a){if(t.length<1)stockDataDiv.innerHTML='<h2 class="message">No results found</h2>',resultTotals.innerHTML="Showing 0 to 0 of 0 results",nextButton.disabled=!0,prevButton.disabled=!0;else{stockDataDiv.innerHTML="";let l=document.createElement("table");for(let r=e;r<a+1&&!(r>t.length-1);r++){if(r===e){let t=document.createElement("tr");heading.forEach(e=>{let a=document.createElement("th");a.textContent=e,t.appendChild(a)}),l.appendChild(t)}let a=document.createElement("tr");for(let e=0;e<10;e++)if(4!==e&&5!==e){let l=document.createElement("td");l.textContent=t[r][e],8===e&&(parseInt(t[r][8],10)<=0?l.classList.add("ready-red"):parseInt(t[r][8],10)<10?l.classList.add("ready-yellow"):l.classList.add("ready-green")),a.appendChild(l)}l.appendChild(a)}stockDataDiv.appendChild(l),resultTotals.innerHTML=`Showing ${e+1} to ${a>t.length?t.length:a+1} of ${t.length} results`}prevButton.disabled=0===e,0!==t.length&&(a>=t.length-1?nextButton.disabled=!0:nextButton.disabled=!1)}function searchRetailData(t){t.length>0&&(filteredData=[],stockData.forEach(e=>{null!=e[0]&&(e[0].toLowerCase().includes(t.toLowerCase())||e[1].toLowerCase().includes(t.toLowerCase()))&&filteredData.push(e)}),stockDataDiv.innerHTML="",resetStartEnd(),displayData(filteredData,retailStart,retailEnd))}function resetStartEnd(){retailStart=0,retailEnd=24}let retailSearchInput=document.querySelector(".search"),nextButton=document.querySelector("#next"),prevButton=document.querySelector("#prev"),resultTotals=document.querySelector("#result-totals"),stockDataDiv=document.querySelector("#stock-data");var stockData=[];let filteredData=[],retailStart=0,retailEnd=24,heading=["BOTANICAL NAME","COMMON NAME","GRADE","$R","HEIGHT (m)","STANDARD (m)","READY","COMING ON"];window.addEventListener("loginUpdated",()=>{(async function(){stockData=await fetch("https://api.leafland.co.nz/default/get-stock-data-file?type=list").then(t=>t.json()).catch(t=>{}),await displayData(stockData,retailStart,retailEnd),retailSearchInput.removeAttribute("disabled"),retailSearchInput.addEventListener("input",t=>{t.target.value.length<=0?displayData(stockData,retailStart,retailEnd):searchRetailData(t.target.value)}),document.body.classList.add("page-loaded")})()}),nextButton.addEventListener("click",()=>{retailStart+=25,retailEnd+=25,filteredData.length>1&&retailSearchInput.value.length>0?displayData(filteredData,retailStart,retailEnd):displayData(stockData,retailStart,retailEnd)}),prevButton.addEventListener("click",()=>{retailStart-=25,retailEnd-=25,(retailStart<0||retailEnd<0)&&resetStartEnd(),filteredData.length>1&&retailSearchInput.value.length>0?displayData(filteredData,retailStart,retailEnd):displayData(stockData,retailStart,retailEnd)});