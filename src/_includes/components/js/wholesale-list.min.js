let wholesaleSearchInput=document.querySelector(".search"),nextButton=document.querySelector("#next"),prevButton=document.querySelector("#prev"),resultTotals=document.querySelector("#result-totals"),stockDataDiv=document.querySelector("#stock-data");var stockData=[];let filteredData=[],wholesaleStart=0,wholesaleEnd=24,heading=["BOTANICAL NAME","COMMON NAME","GRADE","$R","$W-10%","$W-20%","HEIGHT (m)","STANDARD (m)","READY","COMING ON"];async function displayData(dataSet,wholesaleStart,wholesaleEnd){if(dataSet.length<1)stockDataDiv.innerHTML='<h2 class="message">No results found</h2>',resultTotals.innerHTML="Showing 0 to 0 of 0 results",nextButton.disabled=!0,prevButton.disabled=!0;else{stockDataDiv.innerHTML="";let table=document.createElement("table");for(let i=wholesaleStart;i<wholesaleEnd+1&&!(i>dataSet.length-1);i++){if(i===wholesaleStart){let row=document.createElement("tr");heading.forEach(item=>{let cell=document.createElement("th");cell.textContent=item,row.appendChild(cell)}),table.appendChild(row)}let row=document.createElement("tr");for(let j=0;j<10;j++){let cell=document.createElement("td");cell.textContent=dataSet[i][j],row.appendChild(cell)}table.appendChild(row)}stockDataDiv.appendChild(table),resultTotals.innerHTML=`Showing ${wholesaleStart+1} to ${wholesaleEnd>dataSet.length?dataSet.length:wholesaleEnd+1} of ${dataSet.length} results`}prevButton.disabled=0===wholesaleStart,0!==dataSet.length&&(wholesaleEnd>=dataSet.length-1?nextButton.disabled=!0:nextButton.disabled=!1)}function searchWholesaleData(input){input.length>0&&(filteredData=[],stockData.forEach(data=>{null!=data[0]&&(data[0].toLowerCase().includes(input.toLowerCase())||data[1].toLowerCase().includes(input.toLowerCase()))&&filteredData.push(data)}),stockDataDiv.innerHTML="",resetStartEnd(),displayData(filteredData,wholesaleStart,wholesaleEnd))}function resetStartEnd(){wholesaleStart=0,wholesaleEnd=24}window.addEventListener("loginUpdated",()=>{!async function(){stockData=await fetch("https://api.leafland.co.nz/default/get-stock-data-file?type=list").then(response=>response.json()).catch(error=>{}),await displayData(stockData,wholesaleStart,wholesaleEnd),wholesaleSearchInput.removeAttribute("disabled"),wholesaleSearchInput.addEventListener("input",e=>{e.target.value.length<=0?displayData(stockData,wholesaleStart,wholesaleEnd):searchWholesaleData(e.target.value)})}()}),nextButton.addEventListener("click",()=>{wholesaleStart+=25,wholesaleEnd+=25,filteredData.length>1&&wholesaleSearchInput.value.length>0?displayData(filteredData,wholesaleStart,wholesaleEnd):displayData(stockData,wholesaleStart,wholesaleEnd)}),prevButton.addEventListener("click",()=>{wholesaleStart-=25,wholesaleEnd-=25,(wholesaleStart<0||wholesaleEnd<0)&&resetStartEnd(),filteredData.length>1&&wholesaleSearchInput.value.length>0?displayData(filteredData,wholesaleStart,wholesaleEnd):displayData(stockData,wholesaleStart,wholesaleEnd)});