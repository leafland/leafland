let loginForm=document.querySelector("#login-form"),returnMessage=document.querySelector("#return-message"),logOutButton=document.querySelector("#log-out"),login=!1,openLogin=document.querySelector("#open-login"),closeLogin=document.querySelector("#close-login"),emails=[];async function logIn(event){document.querySelector("#log-in").value="Logging in...",emails=await fetch("/public/emails.json").then(response=>response.json()).catch(error=>{}),emails.includes(event.target[0].value.toLowerCase())&&(login=!0)}loginForm.addEventListener("submit",event=>{event.preventDefault(),async function(){await logIn(event),login&&void 0!==login?(document.querySelector("#log-in").value="Log in",document.querySelector("#log-in").disabled=!0,sessionStorage.setItem("loggedIn","true"),sessionStorage.setItem("loginEmail",`${event.target[0].value.toLowerCase()}`),"/retail-stock-list/"===window.location.pathname?window.location.pathname="/wholesale-stock-list/":window.location.reload()):(returnMessage.textContent="Invalid email address. Please try again.",document.querySelector("#log-in").value="Log in",document.querySelector("#log-in").disabled=!1,sessionStorage.setItem("loggedIn","false"))}()}),openLogin.addEventListener("click",()=>{document.querySelector("#log-in").disabled=!1,returnMessage.textContent="",document.body.classList.add("login-open")}),closeLogin.addEventListener("click",()=>{document.body.classList.remove("login-open")}),logOutButton.addEventListener("click",()=>{sessionStorage.setItem("loggedIn","false"),"/wholesale-stock-list/"===window.location.pathname?window.location.pathname="/retail-stock-list/":window.location.reload()});