let menuStockLink=document.querySelector("#menu-stock-link"),loggedIn=!1,treeData=[];const orderSent=new Event("orderSent"),dataLoaded=new Event("dataLoaded");"true"===sessionStorage.getItem("submittedOrder")?(sessionStorage.setItem("trees","[]"),window.dispatchEvent(orderSent),document.body.classList.add("order-sent-open"),document.querySelector("#close-order-sent").addEventListener("click",()=>{document.body.classList.remove("order-sent-open")}),sessionStorage.setItem("submittedOrder","false")):document.body.classList.remove("order-sent-open"),null===sessionStorage.getItem("trees")&&sessionStorage.setItem("trees","[]"),"false"===sessionStorage.getItem("loggedIn")||null===sessionStorage.getItem("loggedIn")?(loggedIn=!1,sessionStorage.setItem("loggedIn","false"),menuStockLink.href="/retail-stock-list/",document.body.classList.remove("loggedIn"),document.querySelector("#login-form").style.setProperty("display","block"),document.querySelector("#login-message").style.setProperty("display","none"),document.querySelector("#log-out").style.setProperty("display","none")):(loggedIn=!0,sessionStorage.setItem("loggedIn","true"),menuStockLink.href="/wholesale-stock-list/",document.body.classList.add("loggedIn"),document.querySelector("#login-form").style.setProperty("display","none"),document.querySelector("#login-message").style.setProperty("display","block"),document.querySelector("#log-out").style.setProperty("display","block")),async function(){treeData=await fetch("/public/trees.json").then(response=>response.json()).then(data=>data).catch(error=>{}),window.dispatchEvent(dataLoaded)}(),document.querySelector("#subscribe-form").addEventListener("submit",event=>{event.preventDefault(),document.querySelector("#subscribe").value="Subscribing...";const subscribeExternalBody=JSON.stringify({fromAddress:"administrator@leafland.co.nz",fromName:"Admin | Leafland",toAddress:"joshua@leafland.co.nz",replyToAddress:"administrator@leafland.co.nz",replyToName:"Admin | Leafland",subject:"New Subscriber",html:`<!DOCTYPE html><html><head><body>Name: ${event.target.firstName.value}, Email: ${event.target.email.value}</body></html>`,isOpenTracked:!1}),subscribeExternalRequestOptions={method:"POST",mode:"no-cors",body:subscribeExternalBody},newContactExternalBody=JSON.stringify({emailAddress:event.target.email.value,customProps:{firstName:event.target.firstName.value,name:event.target.firstName.value,group:"retail"},groups:["63505e05ba58556251082c42"]}),newContactExternalRequestOptions={method:"POST",mode:"no-cors",body:newContactExternalBody};!async function(){await fetch("https://update-contacts.leafland.co.nz",newContactExternalRequestOptions).then(response=>{}).catch(error=>{}),await fetch("https://subscribe.leafland.co.nz",subscribeExternalRequestOptions).then(response=>{document.querySelector("#email-signup").innerHTML="<p>Thanks for subscribing!</p>"}).catch(error=>{})}()});